(this.webpackJsonpok_jason=this.webpackJsonpok_jason||[]).push([[0],{38:function(e,t,n){e.exports=n(66)},43:function(e,t,n){},44:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(11),r=n.n(o),i=(n(43),n(18)),s=n(5),l=(n(44),n(12)),u=n.n(l),m=n(14),d=n.n(m);var h=function(e){var t=e.news,n=e.handleResumeSpeechRecognition,o=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth"],r=["twent","thirt","fort","fift","sixt","sevent","eight","ninet"],s=Object(a.useRef)(new d.a),l=Object(i.a)(t).reduce((function(e,t){return t.content?[].concat(Object(i.a)(e),[t]):e}),[]);return Object(a.useEffect)((function(){var e=s.current;return e.init({voice:"Google UK English Male"}).then((function(){var t=l.map((function(e,t){return e.content?"The ".concat(function(e){return e<20?o[e]:e%10===0?r[Math.floor(e/10)-2]+"ieth":r[Math.floor(e/10)-2]+"y-"+o[e%10]}(t+1)," news is ... ").concat(e.content," ..."):""})).join("");e.speak({text:t,listeners:{onend:function(){console.log("TTS ended")}}}).then((function(){console.log("TTS finished"),n()}))})),function(){e.cancel()}}),[]),c.a.createElement(a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-warning btn-block mb-4",onClick:function(){s&&(console.log("TTS canceled"),s.current.cancel(),n())}},"Stop Playing Audio"),l.map((function(e,t){return c.a.createElement("div",{className:"card mb-4",key:"news_".concat(t),"data-aos":t%2===0?"fade-right":"fade-left"},c.a.createElement("h3",{className:"card-header"},e.title),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("img",{className:"col-12 col-sm-5 col-md-3",src:e.urlToImage,alt:"news iamge"}),c.a.createElement("div",{className:"card-text col-12 col-sm-7 col-md-9"},c.a.createElement("p",null,e.content&&e.content.replace(/(<([^>]+)>)/gi,"")),c.a.createElement("p",null,"Link : ",c.a.createElement("a",{href:"".concat(e.url),target:"#blank"}," ".concat(e.url)))))))})))},f=n(69),g=n(70);var p=function(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),o=n[0],r=n[1];return c.a.createElement(f.a,{show:o,backdrop:"static",keyboard:!1},c.a.createElement(f.a.Header,null,c.a.createElement(f.a.Title,null,"Please confirm the audio permission")),c.a.createElement(f.a.Body,null,"This speech recognition app needs the audio permission. Please select OK button."),c.a.createElement(f.a.Footer,null,c.a.createElement(g.a,{variant:"primary",onClick:function(){e.onClick(),r(!1)}},"OK")))},b=/^(who is )|(what is)|(explain about)|(explain )|(tell me about )/,w="BeforeTrigger",y="AfterTriggerFirst",E="AfterTrigger",v="DuringProcessing",S=["SUN","MON","TUE","WED","THU","FRI","SAT"];var j=function(e){var t=e.wiki,n=e.handleResumeSpeechRecognition,o=Object(a.useRef)(new d.a),r=Object(a.useState)(""),i=Object(s.a)(r,2),l=i[0],m=i[1];return Object(a.useEffect)((function(){var e=o.current,a=t.replace(b,"").split(" ").map((function(e){return e.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")})).join(" ");u.a.get("https://en.wikipedia.org/w/api.php?format=json&origin=*&action=query&prop=extracts&exintro&explaintext&redirects=1&titles=".concat(a)).then((function(t){var c=t.data.query.pages,o=Object.keys(c)[0],r="-1"===o?"There is no information about ".concat(a):c[o].extract;e.init({voice:"Google UK English Male"}).then((function(){e.speak({text:r,listeners:{onend:function(){console.log("TTS ended")}}}).then((function(){console.log("TTS finished"),n()})).catch((function(e){console.log("TTS error")}))})),m(r)}))}),[]),c.a.createElement(a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-warning btn-block mb-4",onClick:function(){o&&(console.log("TTS canceled"),o.current.cancel(),n())}},"Stop Playing Audio"),c.a.createElement("div",{className:"card mb-4","data-aos":"fade-up"},c.a.createElement("h3",{className:"card-header"},t),c.a.createElement("p",{className:"card-body"},l)))},T=n(37);var O=function(e){e.question;var t=e.handleResumeSpeechRecognition,n=Object(a.useRef)(new d.a),o=Object(a.useState)(""),r=Object(s.a)(o,2),i=r[0],l=r[1],m=Object(a.useState)(null),h=Object(s.a)(m,2),f=h[0],g=h[1],p=Object(a.useState)(null),b=Object(s.a)(p,2),w=b[0],y=b[1],E=function(e){return Math.floor(5*(e-32)/9)};return Object(a.useEffect)((function(){window.navigator.geolocation.getCurrentPosition((function(e){u.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat("A91us5Ma0sfbbrVA8SVYBGVpS5ryg156","&q=").concat(e.coords.latitude,",").concat(e.coords.longitude)).then((function(e){var a=e.data.Key,c=e.data.EnglishName;if(!a)return l("Counldn't find the city name!"),t(),g(null),void y(null);g(e.data),u.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(a,"?apikey=").concat("A91us5Ma0sfbbrVA8SVYBGVpS5ryg156")).then((function(e){console.log("res:",e);var a=Object(T.a)({},e.data);a.DailyForecasts.forEach((function(e,t){a.DailyForecasts[t].Temperature.Minimum.Value=E(e.Temperature.Minimum.Value),a.DailyForecasts[t].Temperature.Maximum.Value=E(e.Temperature.Maximum.Value);var n=new Date(e.Date);a.DailyForecasts[t].formattedDayOfWeek=S[n.getDay()],a.DailyForecasts[t].formattedDay="".concat(n.getDate()," / ").concat(n.getMonth())}));var o=n.current,r="Welcome to Jason's Weather forecast. Now, let\u2019s see what the weather is like today in ".concat(c,".")+"Today, temperature is ".concat(a.DailyForecasts[0].Temperature.Minimum.Value," degree to ").concat(a.DailyForecasts[0].Temperature.Maximum.Value," degree.")+" It will be ".concat(a.DailyForecasts[0].Day.IconPhrase," for most of the day,")+" and, ".concat(a.DailyForecasts[0].Night.IconPhrase," in the evening.")+" Tomorrow, temperature is ".concat(a.DailyForecasts[1].Temperature.Minimum.Value," degree to ").concat(a.DailyForecasts[1].Temperature.Maximum.Value," degree.")+" It will be ".concat(a.DailyForecasts[1].Day.IconPhrase," for most of the day,")+" and, ".concat(a.DailyForecasts[1].Night.IconPhrase," in the evening.");o.init({voice:"Google UK English Male"}).then((function(){o.speak({text:r,listeners:{onend:function(){console.log("TTS ended")}}}).then((function(){console.log("TTS finished"),t()})).catch((function(e){console.log("TTS error")}))})),y(a)}))}))}))}),[]),c.a.createElement("div",null,c.a.createElement("h3",null,i),f&&w&&c.a.createElement(a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-warning btn-block mb-4",onClick:function(){n&&(console.log("TTS canceled"),n.current.cancel(),t())}},"Stop Playing Audio"),c.a.createElement("h2",{className:"text-center"},f.EnglishName),w.DailyForecasts.map((function(e,t){return c.a.createElement("div",{className:"card mb-4",key:"forecast_".concat(t),"data-aos":t%2===0?"fade-right":"fade-left"},c.a.createElement("div",{className:"row d-flex align-items-center justify-content-center"},c.a.createElement("div",{className:"col-3 col-sm-3 col-md-2"},c.a.createElement("div",{className:"text-center"},c.a.createElement("strong",null,e.formattedDayOfWeek)),c.a.createElement("div",{className:"text-center"},e.formattedDay)),c.a.createElement("img",{className:"col-3 col-sm-2 col-md-2 py-3",style:{maxWidth:"100px"},src:"https://www.accuweather.com/images/weathericons/".concat(e.Day.Icon,".svg"),alt:""}),c.a.createElement("div",{className:"col-5 col-sm-3 col-md-2"},c.a.createElement("span",{style:{fontSize:"2em"}},"".concat(e.Temperature.Maximum.Value,"\xb0")),c.a.createElement("span",{style:{fontSize:"1.2em"}},"/ ".concat(e.Temperature.Minimum.Value,"\xb0"))),c.a.createElement("div",{className:"col-12 col-sm-12 col-md-5 mb-3 mb-md-0 px-sm-0 text-center",style:{fontSize:"1.5em"}},e.Day.IconPhrase)))}))))};var k=function(){var e=new(window.SpeechRecognition||window.webkitSpeechRecognition),t=new Audio("/SpeechOn.wav"),n=Object(a.useState)(w),o=Object(s.a)(n,2),r=o[0],l=o[1],m=Object(a.useState)(!1),d=Object(s.a)(m,2),f=d[0],g=d[1],S=Object(a.useState)(""),T=Object(s.a)(S,2),k=T[0],N=T[1],x=Object(a.useState)([]),D=Object(s.a)(x,2),R=D[0],M=D[1],F=Object(a.useState)(""),V=Object(s.a)(F,2),A=V[0],C=V[1],P=Object(a.useState)(""),I=Object(s.a)(P,2),K=I[0],U=I[1],W=Object(a.useRef)(!1);e.interimResults=!0,e.lang="en-US";var B=function(){!0!==W.current?(console.log("handleResumeSpeechRecognition"),l(w),N(""),g(!1),e.start()):console.log("handleResumeSpeechRecognition, but doesn't do anything due to the duplication")};return e.addEventListener("result",(function(e){var t=Object(i.a)(e.results).map((function(e){return e[0].transcript})).join("");e.results[0].isFinal&&N(t)})),e.addEventListener("start",(function(){console.log("Speech recognition started"),W.current=!0})),e.addEventListener("end",(function(){console.log("Speech recognition ended, checkRestart = "+f),W.current=!1,g(!0)})),Object(a.useEffect)((function(){console.log(window),window.AOS.init({duration:1500,offset:200})}),[]),Object(a.useEffect)((function(){!function(){switch(r){case w:console.log("BeforeTrigger is set");break;case E:console.log("AfterTrigger is set");break;case v:console.log("DuringProcessing is set")}}()}),[r]),Object(a.useEffect)((function(){console.log("handleCheckRestart, checkRestart = ".concat(f,", curStage = ").concat(r)),f&&(r===w?(g(!1),e.start()):r===y?(g(!1),e.start(),l(E)):r===E&&B())}),[f]),Object(a.useEffect)((function(){!function(){if(""!==k){console.log("handleMatchCmd, curStage = ".concat(r));var n=k.toLowerCase();switch(console.log("transcriptCompare:",n),r){case w:"ok jason"===n&&(t.play(),M([]),l(y),N(""),C(""),U(""));break;case E:n.includes("news")?u.a.get("https://newsapi.org/v2/top-headlines?country=au&apiKey=".concat("f72d1906112b410880b5896e3622782d")).then((function(t){var n=t.data.articles.map((function(e){return e.content=e.content&&e.content.replace(/\u2026 \[\+\d+ chars\]/,""),e}));console.log("tempNews:",n),M(n),l(v),g(!1),N(""),e.start()})):n.includes("unicorn")?(console.log("unicorn"),window.cornify_add(),window.cornify_add(),window.cornify_add(),l(w),g(!1),N("")):n.includes("weather")?U(k):b.test(n)?""!==n.replace(b,"").trim()&&(l(v),C(k)):B()}}}()}),[k]),c.a.createElement("div",{className:"mb-4"},c.a.createElement("div",{className:"jumbotron"},c.a.createElement(p,{onClick:function(){console.log("handleInitiateAudioClick"),l(E),N("weather")}}),c.a.createElement("h1",{className:"display-4 text-center"},'Say "OK Jason"'),c.a.createElement("div",{className:"text-center display-3 mb-2 ".concat(r===E||r===y?"text-danger":"text-dark")},c.a.createElement("i",{className:"fas fa-microphone-alt"})),c.a.createElement("p",{className:"text-center"},k||"...")),c.a.createElement("div",{className:"container"},R&&0!==R.length&&c.a.createElement(h,{news:R,handleResumeSpeechRecognition:B}),A&&c.a.createElement(j,{wiki:A,handleResumeSpeechRecognition:B}),K&&c.a.createElement(O,{question:K,handleResumeSpeechRecognition:B})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.2c97cf2b.chunk.js.map